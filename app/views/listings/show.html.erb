<%# modal here %>

<p id="notice"><%= notice %></p>

<div class="row d-flex justify-content-center">
    <%# image carousel module %>
    <div id="carouselExampleControls" class="carousel slide align-items-center" data-interval="false">
      <div class="carousel-inner">
        <% @listing.images.each_with_index do |image, index| %>
          <% if index < 1 %>
            <div class="carousel-item active">
              <%= image_tag image, class: "d-block w-100", alt: "slide #{index + 1}", width: "500"%>
            </div>
          <% else %>
            <% p "This is the second image"%>
            <div class="carousel-item">
              <%= image_tag image, class: "d-block w-100", alt: "slide #{index + 1}", width: "500"%>
            </div>
          <% end %>
        <% end %>
      </div>
      <a class="carousel-control-prev" href="#carouselExampleControls"role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carouselExampleControls"role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>

    <%# listing details %>
    <div class="col-md-3">
      <h1>
        <span><%= @listing.title %> 
        <% if @listing.user_id == current_user.id %>
          <%= link_to "Edit", edit_listing_path(@listing), class: "btn btn-success",role: "button" %> 
        <% end %>
        <%= link_to 'Back', listings_path, class: "btn btn-success",role: "button"%>
        </span>
      </h1>
      <p>
        <h5>Price:
        $<%= @listing.price %>
        </h5>
      </p>
      <p>
        <h5>Condition:
        <%= @listing.condition %>
        </h5>
      </p>
      <p>
        <h5>Delivery:
        <% if @listing.delivery == true %>
          available
        <% else %>
          not available
        <% end %>
        </h5>
      </p>
      <p>
        <h5>Description:
        <%= @listing.description %>
        </h5>
      </p>
      <p>
        <h5>Location:</h5>
        <%# @listing.location %>
      </p>

      <div style="height: 300px; width: 300px" id="map"></div>
      <%= javascript_pack_tag "leaflet/show" %>

      <div class="seller_info">
        <h5>Seller Information</h5>
        <%# use bootstrap here to have user info pop up %>
        <%= image_tag @listing.user.avatar, size:"40x40" %>
        <%= @listing.user.name %>&nbsp&nbsp&nbsp&nbsp&nbsp
        <span>has
        <%= @listing.user.listings.length%> 
        <% if @listing.user.listings.length <= 1 %> 
          post 
        <% else %>
          posts 
        <% end %>
        </span>

        <h5>Contact Seller</h5>
        <input type="text" placeholder="send seller a message">
        <button>Submit</button>
      </div>
    </div>
</div>



<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>