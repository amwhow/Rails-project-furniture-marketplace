<div class="container">
  <p id="notice"><%= notice %></p>

  <%= form_with(scope: :search, url: listings_path, method: 'get', local: true) do |f|%>
    <div class="row justify-content-center" >
      <%= f.text_field :title, class:"form-control mr-sm-4", type: "search", placeholder: "I am looking for...", style: "margin-bottom: 20px";%>
      <%= f.submit "Search", class:"btn btn-primary" %>
    </div>
  <% end %>

  <% if params[:search].present? %>
    <%= link_to "Back", listings_path, class: "btn btn-primary",role: "button" %>
  <% end %>

    <div class="row justify-content-around">
      <% @listings.each do |listing| %>
        <div class="card col-sm-3  my-2">
          <% if listing.images.attached? %>
            <%= image_tag listing.images.first, class:"card-img-top", alt:"listing preview image", width: "250" %>
          <% else %>
            <%= image_tag "logo", class:"card-img-top", alt:"listing preview image", width: "250" %>
          <% end %>
          <div class="card-body">
            <h5 class="card-title"><%= listing.title %></h5>
            <p class="card-text">Price: <%= listing.price %></p>
            <p class="card-text">Delivery: 
            <% if listing.delivery == true %>
              available
            <% else %>
              not available
            <% end %>
            </p>
            <p class="card-text">Location: <%= listing.location %></p>
            <%= link_to 'See datails', listing_path(listing.id), class: "btn btn-primary" %>
          </div>
        </div>
      <% end %>
    </div>

  <table>
    <thead>
      <tr>
        <th>Delivery</th>
        <th>Location</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @listings.each do |listing| %>
        <tr>
          <td><%= listing.delivery %></td>
          <td><%= listing.location %></td>
          <td><%= link_to 'Show', listing %></td>
          <td><%= link_to 'Edit', edit_listing_path(listing) %></td>
          <td><%= link_to 'Destroy', listing, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <br>

  <%= link_to 'New Listing', new_listing_path %>
</div>
